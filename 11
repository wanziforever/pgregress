1d0
< {'teardown': ['DROP TABLE a, b;'], 'permutations': [['s1', 'at1', 'sc1', 's2', 'at2', 'sc2', 'rx1', 'wx', 'rx3', 'c2'], ['s1', 'at1', 'sc1', 's2', 'at2', 'rx1', 'sc2', 'wx', 'rx3', 'c2'], ['s1', 'at1', 'sc1', 's2', 'at2', 'rx1', 'wx', 'sc2', 'rx3', 'c2'], ['s1', 'at1', 'sc1', 's2', 'at2', 'rx1', 'wx', 'rx3', 'sc2', 'c2'], ['s1', 'at1', 'sc1', 's2', 'at2', 'rx1', 'wx', 'rx3', 'c2', 'sc2'], ['s1', 'at1', 'sc1', 's2', 'rx1', 'at2', 'sc2', 'wx', 'rx3', 'c2'], ['s1', 'at1', 'sc1', 's2', 'rx1', 'at2', 'wx', 'sc2', 'rx3', 'c2'], ['s1', 'at1', 'sc1', 's2', 'rx1', 'at2', 'wx', 'rx3', 'sc2', 'c2'], ['s1', 'at1', 'sc1', 's2', 'rx1', 'at2', 'wx', 'rx3', 'c2', 'sc2'], ['s1', 'at1', 'sc1', 's2', 'rx1', 'wx', 'at2', 'sc2', 'rx3', 'c2'], ['s1', 'at1', 'sc1', 's2', 'rx1', 'wx', 'at2', 'rx3', 'sc2', 'c2'], ['s1', 'at1', 'sc1', 's2', 'rx1', 'wx', 'at2', 'rx3', 'c2', 'sc2'], ['s1', 'at1', 'sc1', 's2', 'rx1', 'wx', 'rx3', 'at2', 'sc2', 'c2'], ['s1', 'at1', 'sc1', 's2', 'rx1', 'wx', 'rx3', 'at2', 'c2', 'sc2'], ['s1', 'at1', 'sc1', 's2', 'rx1', 'wx', 'rx3', 'c2', 'at2', 'sc2'], ['s1', 'at1', 'sc1', 'rx1', 's2', 'at2', 'sc2', 'wx', 'rx3', 'c2'], ['s1', 'at1', 'sc1', 'rx1', 's2', 'at2', 'wx', 'sc2', 'rx3', 'c2'], ['s1', 'at1', 'sc1', 'rx1', 's2', 'at2', 'wx', 'rx3', 'sc2', 'c2'], ['s1', 'at1', 'sc1', 'rx1', 's2', 'at2', 'wx', 'rx3', 'c2', 'sc2'], ['s1', 'at1', 'sc1', 'rx1', 's2', 'wx', 'at2', 'sc2', 'rx3', 'c2'], ['s1', 'at1', 'sc1', 'rx1', 's2', 'wx', 'at2', 'rx3', 'sc2', 'c2'], ['s1', 'at1', 'sc1', 'rx1', 's2', 'wx', 'at2', 'rx3', 'c2', 'sc2'], ['s1', 'at1', 'sc1', 'rx1', 's2', 'wx', 'rx3', 'at2', 'sc2', 'c2'], ['s1', 'at1', 'sc1', 'rx1', 's2', 'wx', 'rx3', 'at2', 'c2', 'sc2'], ['s1', 'at1', 'sc1', 'rx1', 's2', 'wx', 'rx3', 'c2', 'at2', 'sc2'], ['s1', 'at1', 'sc1', 'rx1', 'wx', 's2', 'at2', 'sc2', 'rx3', 'c2'], ['s1', 'at1', 'sc1', 'rx1', 'wx', 's2', 'at2', 'rx3', 'sc2', 'c2'], ['s1', 'at1', 'sc1', 'rx1', 'wx', 's2', 'at2', 'rx3', 'c2', 'sc2'], ['s1', 'at1', 'sc1', 'rx1', 'wx', 's2', 'rx3', 'at2', 'sc2', 'c2'], ['s1', 'at1', 'sc1', 'rx1', 'wx', 's2', 'rx3', 'at2', 'c2', 'sc2'], ['s1', 'at1', 'sc1', 'rx1', 'wx', 's2', 'rx3', 'c2', 'at2', 'sc2'], ['s1', 'at1', 'sc1', 'rx1', 'wx', 'rx3', 's2', 'at2', 'sc2', 'c2'], ['s1', 'at1', 'sc1', 'rx1', 'wx', 'rx3', 's2', 'at2', 'c2', 'sc2'], ['s1', 'at1', 'sc1', 'rx1', 'wx', 'rx3', 's2', 'c2', 'at2', 'sc2'], ['s1', 'at1', 'sc1', 'rx1', 'wx', 'rx3', 'c2', 's2', 'at2', 'sc2'], ['s1', 'at1', 'rx1', 'sc1', 's2', 'at2', 'sc2', 'wx', 'rx3', 'c2'], ['s1', 'at1', 'rx1', 'sc1', 's2', 'at2', 'wx', 'sc2', 'rx3', 'c2'], ['s1', 'at1', 'rx1', 'sc1', 's2', 'at2', 'wx', 'rx3', 'sc2', 'c2'], ['s1', 'at1', 'rx1', 'sc1', 's2', 'at2', 'wx', 'rx3', 'c2', 'sc2'], ['s1', 'at1', 'rx1', 'sc1', 's2', 'wx', 'at2', 'sc2', 'rx3', 'c2'], ['s1', 'at1', 'rx1', 'sc1', 's2', 'wx', 'at2', 'rx3', 'sc2', 'c2'], ['s1', 'at1', 'rx1', 'sc1', 's2', 'wx', 'at2', 'rx3', 'c2', 'sc2'], ['s1', 'at1', 'rx1', 'sc1', 's2', 'wx', 'rx3', 'at2', 'sc2', 'c2'], ['s1', 'at1', 'rx1', 'sc1', 's2', 'wx', 'rx3', 'at2', 'c2', 'sc2'], ['s1', 'at1', 'rx1', 'sc1', 's2', 'wx', 'rx3', 'c2', 'at2', 'sc2'], ['s1', 'at1', 'rx1', 'sc1', 'wx', 's2', 'at2', 'sc2', 'rx3', 'c2'], ['s1', 'at1', 'rx1', 'sc1', 'wx', 's2', 'at2', 'rx3', 'sc2', 'c2'], ['s1', 'at1', 'rx1', 'sc1', 'wx', 's2', 'at2', 'rx3', 'c2', 'sc2'], ['s1', 'at1', 'rx1', 'sc1', 'wx', 's2', 'rx3', 'at2', 'sc2', 'c2'], ['s1', 'at1', 'rx1', 'sc1', 'wx', 's2', 'rx3', 'at2', 'c2', 'sc2'], ['s1', 'at1', 'rx1', 'sc1', 'wx', 's2', 'rx3', 'c2', 'at2', 'sc2'], ['s1', 'at1', 'rx1', 'sc1', 'wx', 'rx3', 's2', 'at2', 'sc2', 'c2'], ['s1', 'at1', 'rx1', 'sc1', 'wx', 'rx3', 's2', 'at2', 'c2', 'sc2'], ['s1', 'at1', 'rx1', 'sc1', 'wx', 'rx3', 's2', 'c2', 'at2', 'sc2'], ['s1', 'at1', 'rx1', 'sc1', 'wx', 'rx3', 'c2', 's2', 'at2', 'sc2'], ['s1', 'at1', 'rx1', 'wx', 'sc1', 's2', 'at2', 'sc2', 'rx3', 'c2'], ['s1', 'at1', 'rx1', 'wx', 'sc1', 's2', 'at2', 'rx3', 'sc2', 'c2'], ['s1', 'at1', 'rx1', 'wx', 'sc1', 's2', 'at2', 'rx3', 'c2', 'sc2'], ['s1', 'at1', 'rx1', 'wx', 'sc1', 's2', 'rx3', 'at2', 'sc2', 'c2'], ['s1', 'at1', 'rx1', 'wx', 'sc1', 's2', 'rx3', 'at2', 'c2', 'sc2'], ['s1', 'at1', 'rx1', 'wx', 'sc1', 's2', 'rx3', 'c2', 'at2', 'sc2'], ['s1', 'at1', 'rx1', 'wx', 'sc1', 'rx3', 's2', 'at2', 'sc2', 'c2'], ['s1', 'at1', 'rx1', 'wx', 'sc1', 'rx3', 's2', 'at2', 'c2', 'sc2'], ['s1', 'at1', 'rx1', 'wx', 'sc1', 'rx3', 's2', 'c2', 'at2', 'sc2'], ['s1', 'at1', 'rx1', 'wx', 'sc1', 'rx3', 'c2', 's2', 'at2', 'sc2'], ['s1', 'rx1', 'at1', 'sc1', 's2', 'at2', 'sc2', 'wx', 'rx3', 'c2'], ['s1', 'rx1', 'at1', 'sc1', 's2', 'at2', 'wx', 'sc2', 'rx3', 'c2'], ['s1', 'rx1', 'at1', 'sc1', 's2', 'at2', 'wx', 'rx3', 'sc2', 'c2'], ['s1', 'rx1', 'at1', 'sc1', 's2', 'at2', 'wx', 'rx3', 'c2', 'sc2'], ['s1', 'rx1', 'at1', 'sc1', 's2', 'wx', 'at2', 'sc2', 'rx3', 'c2'], ['s1', 'rx1', 'at1', 'sc1', 's2', 'wx', 'at2', 'rx3', 'sc2', 'c2'], ['s1', 'rx1', 'at1', 'sc1', 's2', 'wx', 'at2', 'rx3', 'c2', 'sc2'], ['s1', 'rx1', 'at1', 'sc1', 's2', 'wx', 'rx3', 'at2', 'sc2', 'c2'], ['s1', 'rx1', 'at1', 'sc1', 's2', 'wx', 'rx3', 'at2', 'c2', 'sc2'], ['s1', 'rx1', 'at1', 'sc1', 's2', 'wx', 'rx3', 'c2', 'at2', 'sc2'], ['s1', 'rx1', 'at1', 'sc1', 'wx', 's2', 'at2', 'sc2', 'rx3', 'c2'], ['s1', 'rx1', 'at1', 'sc1', 'wx', 's2', 'at2', 'rx3', 'sc2', 'c2'], ['s1', 'rx1', 'at1', 'sc1', 'wx', 's2', 'at2', 'rx3', 'c2', 'sc2'], ['s1', 'rx1', 'at1', 'sc1', 'wx', 's2', 'rx3', 'at2', 'sc2', 'c2'], ['s1', 'rx1', 'at1', 'sc1', 'wx', 's2', 'rx3', 'at2', 'c2', 'sc2'], ['s1', 'rx1', 'at1', 'sc1', 'wx', 's2', 'rx3', 'c2', 'at2', 'sc2'], ['s1', 'rx1', 'at1', 'sc1', 'wx', 'rx3', 's2', 'at2', 'sc2', 'c2'], ['s1', 'rx1', 'at1', 'sc1', 'wx', 'rx3', 's2', 'at2', 'c2', 'sc2'], ['s1', 'rx1', 'at1', 'sc1', 'wx', 'rx3', 's2', 'c2', 'at2', 'sc2'], ['s1', 'rx1', 'at1', 'sc1', 'wx', 'rx3', 'c2', 's2', 'at2', 'sc2'], ['s1', 'rx1', 'at1', 'wx', 'sc1', 's2', 'at2', 'sc2', 'rx3', 'c2'], ['s1', 'rx1', 'at1', 'wx', 'sc1', 's2', 'at2', 'rx3', 'sc2', 'c2'], ['s1', 'rx1', 'at1', 'wx', 'sc1', 's2', 'at2', 'rx3', 'c2', 'sc2'], ['s1', 'rx1', 'at1', 'wx', 'sc1', 's2', 'rx3', 'at2', 'sc2', 'c2'], ['s1', 'rx1', 'at1', 'wx', 'sc1', 's2', 'rx3', 'at2', 'c2', 'sc2'], ['s1', 'rx1', 'at1', 'wx', 'sc1', 's2', 'rx3', 'c2', 'at2', 'sc2'], ['s1', 'rx1', 'at1', 'wx', 'sc1', 'rx3', 's2', 'at2', 'sc2', 'c2'], ['s1', 'rx1', 'at1', 'wx', 'sc1', 'rx3', 's2', 'at2', 'c2', 'sc2'], ['s1', 'rx1', 'at1', 'wx', 'sc1', 'rx3', 's2', 'c2', 'at2', 'sc2'], ['s1', 'rx1', 'at1', 'wx', 'sc1', 'rx3', 'c2', 's2', 'at2', 'sc2'], ['s1', 'rx1', 'wx', 'at1', 'rx3', 'c2', 'sc1', 's2', 'at2', 'sc2'], ['s1', 'rx1', 'wx', 'rx3', 'at1', 'c2', 'sc1', 's2', 'at2', 'sc2'], ['s1', 'rx1', 'wx', 'rx3', 'c2', 'at1', 'sc1', 's2', 'at2', 'sc2'], ['rx1', 's1', 'at1', 'sc1', 's2', 'at2', 'sc2', 'wx', 'rx3', 'c2'], ['rx1', 's1', 'at1', 'sc1', 's2', 'at2', 'wx', 'sc2', 'rx3', 'c2'], ['rx1', 's1', 'at1', 'sc1', 's2', 'at2', 'wx', 'rx3', 'sc2', 'c2'], ['rx1', 's1', 'at1', 'sc1', 's2', 'at2', 'wx', 'rx3', 'c2', 'sc2'], ['rx1', 's1', 'at1', 'sc1', 's2', 'wx', 'at2', 'sc2', 'rx3', 'c2'], ['rx1', 's1', 'at1', 'sc1', 's2', 'wx', 'at2', 'rx3', 'sc2', 'c2'], ['rx1', 's1', 'at1', 'sc1', 's2', 'wx', 'at2', 'rx3', 'c2', 'sc2'], ['rx1', 's1', 'at1', 'sc1', 's2', 'wx', 'rx3', 'at2', 'sc2', 'c2'], ['rx1', 's1', 'at1', 'sc1', 's2', 'wx', 'rx3', 'at2', 'c2', 'sc2'], ['rx1', 's1', 'at1', 'sc1', 's2', 'wx', 'rx3', 'c2', 'at2', 'sc2'], ['rx1', 's1', 'at1', 'sc1', 'wx', 's2', 'at2', 'sc2', 'rx3', 'c2'], ['rx1', 's1', 'at1', 'sc1', 'wx', 's2', 'at2', 'rx3', 'sc2', 'c2'], ['rx1', 's1', 'at1', 'sc1', 'wx', 's2', 'at2', 'rx3', 'c2', 'sc2'], ['rx1', 's1', 'at1', 'sc1', 'wx', 's2', 'rx3', 'at2', 'sc2', 'c2'], ['rx1', 's1', 'at1', 'sc1', 'wx', 's2', 'rx3', 'at2', 'c2', 'sc2'], ['rx1', 's1', 'at1', 'sc1', 'wx', 's2', 'rx3', 'c2', 'at2', 'sc2'], ['rx1', 's1', 'at1', 'sc1', 'wx', 'rx3', 's2', 'at2', 'sc2', 'c2'], ['rx1', 's1', 'at1', 'sc1', 'wx', 'rx3', 's2', 'at2', 'c2', 'sc2'], ['rx1', 's1', 'at1', 'sc1', 'wx', 'rx3', 's2', 'c2', 'at2', 'sc2'], ['rx1', 's1', 'at1', 'sc1', 'wx', 'rx3', 'c2', 's2', 'at2', 'sc2'], ['rx1', 's1', 'at1', 'wx', 'sc1', 's2', 'at2', 'sc2', 'rx3', 'c2'], ['rx1', 's1', 'at1', 'wx', 'sc1', 's2', 'at2', 'rx3', 'sc2', 'c2'], ['rx1', 's1', 'at1', 'wx', 'sc1', 's2', 'at2', 'rx3', 'c2', 'sc2'], ['rx1', 's1', 'at1', 'wx', 'sc1', 's2', 'rx3', 'at2', 'sc2', 'c2'], ['rx1', 's1', 'at1', 'wx', 'sc1', 's2', 'rx3', 'at2', 'c2', 'sc2'], ['rx1', 's1', 'at1', 'wx', 'sc1', 's2', 'rx3', 'c2', 'at2', 'sc2'], ['rx1', 's1', 'at1', 'wx', 'sc1', 'rx3', 's2', 'at2', 'sc2', 'c2'], ['rx1', 's1', 'at1', 'wx', 'sc1', 'rx3', 's2', 'at2', 'c2', 'sc2'], ['rx1', 's1', 'at1', 'wx', 'sc1', 'rx3', 's2', 'c2', 'at2', 'sc2'], ['rx1', 's1', 'at1', 'wx', 'sc1', 'rx3', 'c2', 's2', 'at2', 'sc2'], ['rx1', 's1', 'wx', 'at1', 'rx3', 'c2', 'sc1', 's2', 'at2', 'sc2'], ['rx1', 's1', 'wx', 'rx3', 'at1', 'c2', 'sc1', 's2', 'at2', 'sc2'], ['rx1', 's1', 'wx', 'rx3', 'c2', 'at1', 'sc1', 's2', 'at2', 'sc2'], ['rx1', 'wx', 's1', 'at1', 'rx3', 'c2', 'sc1', 's2', 'at2', 'sc2'], ['rx1', 'wx', 's1', 'rx3', 'at1', 'c2', 'sc1', 's2', 'at2', 'sc2'], ['rx1', 'wx', 's1', 'rx3', 'c2', 'at1', 'sc1', 's2', 'at2', 'sc2'], ['rx1', 'wx', 'rx3', 's1', 'at1', 'c2', 'sc1', 's2', 'at2', 'sc2'], ['rx1', 'wx', 'rx3', 's1', 'c2', 'at1', 'sc1', 's2', 'at2', 'sc2'], ['rx1', 'wx', 'rx3', 'c2', 's1', 'at1', 'sc1', 's2', 'at2', 'sc2']], 'setup': ['CREATE TABLE a (i int PRIMARY KEY);\n CREATE TABLE b (a_id int);\n INSERT INTO a VALUES (0), (1), (2), (3);\n INSERT INTO b SELECT generate_series(1,1000) % 4;'], 'sessions': {'s1': {'steps': [{'tag': 's1', 'sqls': ['BEGIN;']}, {'tag': 'at1', 'sqls': ['ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;']}, {'tag': 'sc1', 'sqls': ['COMMIT;']}, {'tag': 's2', 'sqls': ['BEGIN;']}, {'tag': 'at2', 'sqls': ['ALTER TABLE b VALIDATE CONSTRAINT bfk;']}, {'tag': 'sc2', 'sqls': ['COMMIT;']}]}, 's2': {'setup': ['BEGIN;'], 'steps': [{'tag': 'rx1', 'sqls': ['SELECT * FROM b WHERE a_id = 1 LIMIT 1;']}, {'tag': 'wx', 'sqls': ['INSERT INTO b VALUES (0);']}, {'tag': 'rx3', 'sqls': ['SELECT * FROM b WHERE a_id = 3 LIMIT 3;']}, {'tag': 'c2', 'sqls': ['COMMIT;']}]}}}
